<!DOCTYPE html>
<html class="dark" lang="es">
<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>FESTA - Menú</title>
    
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link href="https://fonts.googleapis.com/css2?family=Spline+Sans:wght@400;500;700&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />

    <script id="tailwind-config">
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              primary: "#5e1a0d",
              "background-light": "#f8f6f6",
              "background-dark": "#211411", // Color unificado
              "card-dark": "#1E1E1E",     // Color unificado
              "text-primary-dark": "#F5F5F5",
              "text-secondary-dark": "#A9A9A9",
            },
            fontFamily: {
              display: ["Spline Sans", "sans-serif"],
            },
            borderRadius: {
              DEFAULT: "0.25rem",
              lg: "0.5rem",
              xl: "0.75rem",
              full: "9999px",
            },
            // Animación para el modal del carrito
            keyframes: {
              slideUp: {
                '0%': { transform: 'translateY(100%)' },
                '100%': { transform: 'translateY(0)' },
              }
            },
            animation: {
              'slide-up': 'slideUp 0.3s ease-out forwards',
            }
          },
        },
      };
    </script>
    
    <style>
      .material-symbols-outlined {
        font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
      }
      body {
        min-height: 100dvh;
      }
      /* Estilo para la pestaña de categoría activa */
      .category-tab-btn.active {
        color: theme('colors.white');
        border-bottom-color: theme('colors.primary');
      }
    </style>
</head>
<body class="font-display bg-background-light dark:bg-background-dark">

<!-- Fondo -->
  <div class="fixed inset-0 z-0">
    <div class="w-full h-full bg-center bg-cover bg-fixed opacity-30"
      style="background-image: url('images/FestaFrontal.webp');">
    </div>
    <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/50 to-transparent"></div>
  </div>

<div class="relative mx-auto flex h-auto min-h-screen w-full max-w-md flex-col overflow-x-hidden">

  <header class="sticky top-0 z-20 flex items-center justify-between bg-background-dark/80 p-4 pb-3 backdrop-blur-sm">
    <h1 class="text-xl font-bold leading-tight tracking-tighter text-text-primary-dark">Menú</h1>
    <button class="flex cursor-pointer items-center justify-center rounded-full p-1 text-text-primary-dark transition-colors hover:bg-white/10"
            aria-label="Ver notificaciones">
      <span class="material-symbols-outlined text-2xl">notifications</span>
    </button>
  </header>
  
  <div class="sticky top-16 z-10 bg-background-dark/80 backdrop-blur-sm">
    <div class="flex border-b border-white/10 px-4 justify-between overflow-x-auto whitespace-nowrap space-x-4 pb-0 [-ms-scrollbar-style:none] [scrollbar-width:none] [&::-webkit-scrollbar]:hidden">
      <button class="category-tab-btn active flex-shrink-0 flex flex-col items-center justify-center border-b-[3px] border-b-transparent text-text-secondary-dark py-3 px-2" data-target="entradas-content">
        <p class="text-sm font-bold leading-normal tracking-[0.015em]">Entradas</p>
      </button>
      <button class="category-tab-btn flex-shrink-0 flex flex-col items-center justify-center border-b-[3px] border-b-transparent text-text-secondary-dark py-3 px-2" data-target="fondos-content">
        <p class="text-sm font-bold leading-normal tracking-[0.015em]">Fondos</p>
      </button>
      <button class="category-tab-btn flex-shrink-0 flex flex-col items-center justify-center border-b-[3px] border-b-transparent text-text-secondary-dark py-3 px-2" data-target="postres-content">
        <p class="text-sm font-bold leading-normal tracking-[0.015em]">Postres</p>
      </button>
      <button class="category-tab-btn flex-shrink-0 flex flex-col items-center justify-center border-b-[3px] border-b-transparent text-text-secondary-dark py-3 px-2" data-target="tragos-content">
        <p class="text-sm font-bold leading-normal tracking-[0.015em]">Tragos</p>
      </button>
    </div>
  </div>
  
  <main class="flex-1 pb-48">
    
    <section id="entradas-content" class="menu-section pt-5">
      <h2 class="text-white text-[22px] font-bold leading-tight tracking-[-0.015em] px-4 pb-3">Entradas</h2>
      
      <div class="menu-item-card px-4 py-3" data-price="45.00" data-name="Tuna Tartar">
        <div class="flex items-center justify-between gap-4">
          <div class="flex flex-col gap-1 flex-[2_2_0px]">
            <p class="text-white text-base font-bold leading-tight"> Tuna Tartar </p>
            <p class="text-text-secondary-dark text-sm font-normal leading-normal">Tartar de atún aleta amarilla con toques asiáticos.</p>
            <p class="text-white text-base font-bold pt-2">S/ 45.00</p>
          </div>
          <div class="relative flex-1 max-w-[120px]">
            <img src="images/TunaTartar.jpg" alt="Tuna Tartar" class="w-full aspect-square object-cover rounded-lg">
            <button class="add-to-cart-btn absolute -bottom-3 right-3 flex items-center justify-center size-9 bg-primary text-white rounded-full shadow-lg transition-transform active:scale-90">
              <span class="material-symbols-outlined text-xl">add</span>
            </button>
          </div>
        </div>
      </div>
      
      <div class="menu-item-card px-4 py-3" data-price="65.00" data-name="Degustación de causitas">
        <div class="flex items-center justify-between gap-4">
          <div class="flex flex-col gap-1 flex-[2_2_0px]">
            <p class="text-white text-base font-bold leading-tight">Degustación de causitas</p>
            <p class="text-text-secondary-dark text-sm font-normal leading-normal">Selección de cinco causitas con rellenos emblemáticos.</p>
            <p class="text-white text-base font-bold pt-2">S/ 65.00</p>
          </div>
          <div class="relative flex-1 max-w-[120px]">
            <img src="images/Causitas.jpg" alt="Degustación de causitas" class="w-full aspect-square object-cover rounded-lg">
            <button class="add-to-cart-btn absolute -bottom-3 right-3 flex items-center justify-center size-9 bg-primary text-white rounded-full shadow-lg transition-transform active:scale-90">
              <span class="material-symbols-outlined text-xl">add</span>
            </button>
          </div>
        </div>
      </div>

      <div class="menu-item-card px-4 py-3" data-price="49.00" data-name="Alitas BBQ">
        <div class="flex items-center justify-between gap-4">
          <div class="flex flex-col gap-1 flex-[2_2_0px]">
            <p class="text-white text-base font-bold leading-tight">Alitas BBQ</p>
            <p class="text-text-secondary-dark text-sm font-normal leading-normal">Alitas ahumadas al Kamado, marinadas y laqueadas en salsa BBQ.</p>
            <p class="text-white text-base font-bold pt-2">S/ 49.00</p>
          </div>
          <div class="relative flex-1 max-w-[120px]">
            <img src="images/AlitasBBQ.jpg" alt="Alitas BBQ" class="w-full aspect-square object-cover rounded-lg">
            <button class="add-to-cart-btn absolute -bottom-3 right-3 flex items-center justify-center size-9 bg-primary text-white rounded-full shadow-lg transition-transform active:scale-90">
              <span class="material-symbols-outlined text-xl">add</span>
            </button>
          </div>
        </div>
      </div>

      <p class="text-text-secondary-dark px-4">Más contenido de Entradas próximamente...</p>
    </section>
    
    <section id="fondos-content" class="menu-section hidden pt-5">
      <h2 class="text-white text-[22px] font-bold leading-tight tracking-[-0.015em] px-4 pb-3">Fondos</h2>
      
      <div class="menu-item-card px-4 py-3" data-price="59.00" data-name="Tacu tacu Mar y Tierra">
        <div class="flex items-center justify-between gap-4">
          <div class="flex flex-col gap-1 flex-[2_2_0px]">
            <p class="text-white text-base font-bold leading-tight">Tacu tacu Mar y Tierra</p>
            <p class="text-text-secondary-dark text-sm font-normal leading-normal">Tacu tacu de frejoles con arroz, servido con un salteado de lomo.</p>
            <p class="text-white text-base font-bold pt-2">S/ 59.00</p>
          </div>
          <div class="relative flex-1 max-w-[120px]">
            <img src="images/TacuMar.jpg" alt="Tacu tacu Mar y Tierra" class="w-full aspect-square object-cover rounded-lg">
            <button class="add-to-cart-btn absolute -bottom-3 right-3 flex items-center justify-center size-9 bg-primary text-white rounded-full shadow-lg transition-transform active:scale-90">
              <span class="material-symbols-outlined text-xl">add</span>
            </button>
          </div>
        </div>
      </div>

      <div class="menu-item-card px-4 py-3" data-price="65.00" data-name="Pollo anticuchero">
        <div class="flex items-center justify-between gap-4">
          <div class="flex flex-col gap-1 flex-[2_2_0px]">
            <p class="text-white text-base font-bold leading-tight">Pollo anticuchero</p>
            <p class="text-text-secondary-dark text-sm font-normal leading-normal">Medio pollo deshuesado a la parrilla, napado en salsa anticuchera.</p>
            <p class="text-white text-base font-bold pt-2">S/ 65.00</p>
          </div>
          <div class="relative flex-1 max-w-[120px]">
            <img src="images/Polloantic.jpg" alt="Pollo anticuchero" class="w-full aspect-square object-cover rounded-lg">
            <button class="add-to-cart-btn absolute -bottom-3 right-3 flex items-center justify-center size-9 bg-primary text-white rounded-full shadow-lg transition-transform active:scale-90">
              <span class="material-symbols-outlined text-xl">add</span>
            </button>
          </div>
        </div>
      </div>

      <div class="menu-item-card px-4 py-3" data-price="77.00" data-name="Pulpo a la brasa">
        <div class="flex items-center justify-between gap-4">
          <div class="flex flex-col gap-1 flex-[2_2_0px]">
            <p class="text-white text-base font-bold leading-tight">Pulpo a la brasa</p>
            <p class="text-text-secondary-dark text-sm font-normal leading-normal">Pulpo braseado en salsa anticuchera, sobre papas cóctel.</p>
            <p class="text-white text-base font-bold pt-2">S/ 77.00</p>
          </div>
          <div class="relative flex-1 max-w-[120px]">
            <img src="images/Pulpobra.jpg" alt="Pulpo a la brasa" class="w-full aspect-square object-cover rounded-lg">
            <button class="add-to-cart-btn absolute -bottom-3 right-3 flex items-center justify-center size-9 bg-primary text-white rounded-full shadow-lg transition-transform active:scale-90">
              <span class="material-symbols-outlined text-xl">add</span>
            </button>
          </div>
        </div>
      </div>

      <div class="menu-item-card px-4 py-3" data-price="68.00" data-name="Lomo saltado">
        <div class="flex items-center justify-between gap-4">
          <div class="flex flex-col gap-1 flex-[2_2_0px]">
            <p class="text-white text-base font-bold leading-tight">Lomo saltado</p>
            <p class="text-text-secondary-dark text-sm font-normal leading-normal">Lomo fino salteado al wok, servido con arroz con choclo y papas doradas.</p>
            <p class="text-white text-base font-bold pt-2">S/ 68.00</p>
          </div>
          <div class="relative flex-1 max-w-[120px]">
            <img src="images/Lomosal.jpg" alt="Lomo saltado" class="w-full aspect-square object-cover rounded-lg">
            <button class="add-to-cart-btn absolute -bottom-3 right-3 flex items-center justify-center size-9 bg-primary text-white rounded-full shadow-lg transition-transform active:scale-90">
              <span class="material-symbols-outlined text-xl">add</span>
            </button>
          </div>
        </div>
      </div>

      <p class="text-text-secondary-dark px-4">Más contenido de Fondos próximamente...</p>
    </section>
    
    <section id="postres-content" class="menu-section hidden pt-5">
      <h2 class="text-white text-[22px] font-bold leading-tight tracking-[-0.015em] px-4 pb-3">Postres</h2>
      
      <div class="menu-item-card px-4 py-3" data-price="36.00" data-name="Tarta FESTA">
        <div class="flex items-center justify-between gap-4">
          <div class="flex flex-col gap-1 flex-[2_2_0px]">
            <p class="text-white text-base font-bold leading-tight">Tarta FESTA</p>
            <p class="text-text-secondary-dark text-sm font-normal leading-normal"> Cremosa con una base crujiente, coronada con salsa de frutos rojos de estación.</p>
            <p class="text-white text-base font-bold pt-2">S/ 36.00</p>
          </div>
          <div class="relative flex-1 max-w-[120px]">
            <img src="images/TartaFesta.jpg" alt="Tarta FESTA" class="w-full aspect-square object-cover rounded-lg">
            <button class="add-to-cart-btn absolute -bottom-3 right-3 flex items-center justify-center size-9 bg-primary text-white rounded-full shadow-lg transition-transform active:scale-90">
              <span class="material-symbols-outlined text-xl">add</span>
            </button>
          </div>
        </div>
      </div>

      <div class="menu-item-card px-4 py-3" data-price="32.00" data-name="Churros FESTA">
        <div class="flex items-center justify-between gap-4">
          <div class="flex flex-col gap-1 flex-[2_2_0px]">
            <p class="text-white text-base font-bold leading-tight">Churros FESTA</p>
            <p class="text-text-secondary-dark text-sm font-normal leading-normal"> Churros crocantes y rellenos de dulce de leche, recién hechos.</p>
            <p class="text-white text-base font-bold pt-2">S/ 32.00 (4 und.)</p>
          </div>
          <div class="relative flex-1 max-w-[120px]">
            <img src="images/Churros.jpg" alt="Churros FESTA" class="w-full aspect-square object-cover rounded-lg">
            <button class="add-to-cart-btn absolute -bottom-3 right-3 flex items-center justify-center size-9 bg-primary text-white rounded-full shadow-lg transition-transform active:scale-90">
              <span class="material-symbols-outlined text-xl">add</span>
            </button>
          </div>
        </div>
      </div>

      <div class="menu-item-card px-4 py-3" data-price="29.00" data-name="Crema  Brulée">
        <div class="flex items-center justify-between gap-4">
          <div class="flex flex-col gap-1 flex-[2_2_0px]">
            <p class="text-white text-base font-bold leading-tight">Crema  Brulée</p>
            <p class="text-text-secondary-dark text-sm font-normal leading-normal"> Postre francés por excelencia: crema suave y caramelo crujiente.</p>
            <p class="text-white text-base font-bold pt-2">S/ 29.00</p>
          </div>
          <div class="relative flex-1 max-w-[120px]">
            <img src="images/Crema.jpg" alt="Crema  Brulée" class="w-full aspect-square object-cover rounded-lg">
            <button class="add-to-cart-btn absolute -bottom-3 right-3 flex items-center justify-center size-9 bg-primary text-white rounded-full shadow-lg transition-transform active:scale-90">
              <span class="material-symbols-outlined text-xl">add</span>
            </button>
          </div>
        </div>
      </div>

      <p class="text-text-secondary-dark px-4">Más contenido de Postres próximamente...</p>
    </section>
    
    <section id="tragos-content" class="menu-section hidden pt-5">
      <h2 class="text-white text-[22px] font-bold leading-tight tracking-[-0.015em] px-4 pb-3">Tragos</h2>

      <div class="menu-item-card px-4 py-3" data-price="32.00" data-name="Piña Cool">
        <div class="flex items-center justify-between gap-4">
          <div class="flex flex-col gap-1 flex-[2_2_0px]">
            <p class="text-white text-base font-bold leading-tight">Piña Cool</p>
            <p class="text-text-secondary-dark text-sm font-normal leading-normal"> Flor de caña, licor de durazno, piña, menta y limón.</p>
            <p class="text-white text-base font-bold pt-2">S/ 32.00</p>
          </div>
          <div class="relative flex-1 max-w-[120px]">
            <img src="images/PiñaCoc.jpg" alt="Piña Cool" class="w-full aspect-square object-cover rounded-lg">
            <button class="add-to-cart-btn absolute -bottom-3 right-3 flex items-center justify-center size-9 bg-primary text-white rounded-full shadow-lg transition-transform active:scale-90">
              <span class="material-symbols-outlined text-xl">add</span>
            </button>
          </div>
        </div>
      </div>

      <div class="menu-item-card px-4 py-3" data-price="38.00" data-name="Golden Jack">
        <div class="flex items-center justify-between gap-4">
          <div class="flex flex-col gap-1 flex-[2_2_0px]">
            <p class="text-white text-base font-bold leading-tight">Golden Jack</p>
            <p class="text-text-secondary-dark text-sm font-normal leading-normal"> Jack Daniels, aguaymanto, plátano, miel de maple y limón.</p>
            <p class="text-white text-base font-bold pt-2">S/ 38.00</p>
          </div>
          <div class="relative flex-1 max-w-[120px]">
            <img src="images/GoldenJack.jpg" alt="Golden Jack" class="w-full aspect-square object-cover rounded-lg">
            <button class="add-to-cart-btn absolute -bottom-3 right-3 flex items-center justify-center size-9 bg-primary text-white rounded-full shadow-lg transition-transform active:scale-90">
              <span class="material-symbols-outlined text-xl">add</span>
            </button>
          </div>
        </div>
      </div>

      <p class="text-text-secondary-dark px-4">Contenido de Tragos próximamente...</p>
    </section>
    
  </main>
  
  <div id="cart-summary-bar" class="fixed bottom-20 left-0 right-0 z-30 p-4 bg-transparent cursor-pointer">
    <div class="mx-auto max-w-md bg-card-dark rounded-xl shadow-2xl p-4 flex items-center justify-between">
      <div class="flex items-center gap-4">
        <div class="relative">
          <span class="material-symbols-outlined text-white text-3xl">receipt_long</span>
          <div id="cart-count-icon" class="absolute -top-1 -right-2 flex h-5 w-5 items-center justify-center rounded-full bg-primary text-white text-xs font-bold">
            0
          </div>
        </div>
        <div>
          <p class="text-text-secondary-dark text-sm">Total</p>
          <p id="cart-total-amount" class="text-white font-bold text-lg">S/ 0.00</p>
        </div>
      </div>
      <button class="flex cursor-pointer items-center justify-center overflow-hidden rounded-lg bg-primary text-white gap-2 text-base font-bold leading-normal tracking-[0.015em] px-6 py-3 transition-transform active:scale-95">
        <span>Revisar Pedido</span>
      </button>
    </div>
  </div>
  
  <nav class="fixed bottom-0 left-0 right-0 z-20 mx-auto max-w-md border-t border-white/10 bg-background-dark/80 backdrop-blur-sm">
    <div class="flex h-20 items-center justify-around">
      <a class="flex flex-col items-center gap-1 text-text-secondary-dark transition-colors hover:text-primary" href="Home.html" aria-label="Inicio">
        <span class="material-symbols-outlined text-2xl">home</span>
        <span class="text-xs">Inicio</span>
      </a>
      <a class="flex flex-col items-center gap-1 text-primary" href="Menu.html" aria-current="page" aria-label="Menú">
        <span class="material-symbols-outlined !font-extrabold text-2xl" style="font-variation-settings: 'FILL' 1;">restaurant_menu</span>
        <span class="text-xs font-bold">Menú</span>
      </a>
      <a class="flex flex-col items-center gap-1 text-text-secondary-dark transition-colors hover:text-primary" href="Eventos.html" aria-label="Eventos">
        <span class="material-symbols-outlined text-2xl">calendar_month</span>
        <span class="text-xs">Eventos</span>
      </a>
      <a class="flex flex-col items-center gap-1 text-text-secondary-dark transition-colors hover:text-primary" href="Reservacion.html" aria-label="Reservar">
        <span class="material-symbols-outlined text-2xl">book_online</span>
        <span class="text-xs">Reservar</span>
      </a>
      <a class="flex flex-col items-center gap-1 text-text-secondary-dark transition-colors hover:text-primary" href="Perfil.html" aria-label="Perfil">
        <span class="material-symbols-outlined text-2xl">person</span>
        <span class="text-xs">Perfil</span>
      </a>
    </div>
  </nav>

</div>

<div id="cart-modal" class="hidden fixed inset-0 z-40 bg-black/50 backdrop-blur-sm">
  <div class="absolute bottom-0 left-0 right-0 mx-auto w-full max-w-md h-[80%] bg-background-dark rounded-t-xl flex flex-col animate-slide-up">
    
    <header class="flex-shrink-0 flex items-center justify-between p-4 border-b border-white/10">
      <h2 class="text-xl font-bold text-white">Mi Pedido</h2>
      <button id="close-modal-btn" class="p-1 rounded-full text-white transition-colors hover:bg-white/10" aria-label="Cerrar">
        <span class="material-symbols-outlined">close</span>
      </button>
    </header>
    
    <main id="cart-items-container" class="flex-1 p-4 space-y-4 overflow-y-auto">
      <div class="text-center text-text-secondary-dark pt-10">
        <span class="material-symbols-outlined text-4xl">shopping_cart</span>
        <p>Tu carrito está vacío.</p>
        <p class="text-sm">¡Añade platos del menú!</p>
      </div>
    </main>
    
    <footer class="flex-shrink-0 p-4 border-t border-white/10 space-y-4">
      <div class="flex justify-between text-white">
        <span class="text-base">Subtotal</span>
        <span id="cart-subtotal" class="font-bold">S/ 0.00</span>
      </div>
      <div class="flex justify-between text-white">
        <span class="text-base">Servicio (10%)</span>
        <span id="cart-service" class="font-bold">S/ 0.00</span>
      </div>
      <div class="flex justify-between text-white text-lg">
        <span class="font-bold">Total</span>
        <span id="cart-total-final" class="font-bold text-primary">S/ 0.00</span>
      </div>
      <button class="w-full h-14 bg-primary rounded-xl text-white font-bold text-lg flex items-center justify-center transition-transform active:scale-95">
        Confirmar Pedido
      </button>
    </footer>
    
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    
    // --- LÓGICA DE PESTAÑAS (TABS) DE CATEGORÍAS ---
    const tabButtons = document.querySelectorAll('.category-tab-btn');
    const menuSections = document.querySelectorAll('.menu-section');

    tabButtons.forEach(button => {
      button.addEventListener('click', () => {
        const targetId = button.getAttribute('data-target');
        menuSections.forEach(section => section.classList.add('hidden'));
        tabButtons.forEach(btn => btn.classList.remove('active'));
        const targetSection = document.getElementById(targetId);
        if (targetSection) targetSection.classList.remove('hidden');
        button.classList.add('active');
        window.scrollTo(0, 0);
      });
    });

    // --- LÓGICA DEL CARRITO (DEMO) ---
    const cart = {}; // { "Nombre del Plato": { price: 0, quantity: 0 } }
    
    const addButtons = document.querySelectorAll('.add-to-cart-btn');
    const cartCountIcon = document.getElementById('cart-count-icon');
    const cartTotalAmount = document.getElementById('cart-total-amount');
    const cartItemsContainer = document.getElementById('cart-items-container');
    const cartSubtotalEl = document.getElementById('cart-subtotal');
    const cartServiceEl = document.getElementById('cart-service');
    const cartTotalFinalEl = document.getElementById('cart-total-final');

    addButtons.forEach(button => {
      button.addEventListener('click', () => {
        const card = button.closest('.menu-item-card');
        const name = card.dataset.name;
        const price = parseFloat(card.dataset.price);

        if (cart[name]) {
          cart[name].quantity += 1;
        } else {
          cart[name] = { price: price, quantity: 1 };
        }
        
        updateCart();
      });
    });

    function updateCart() {
      let totalItems = 0;
      let subtotal = 0;
      
      // Limpiar el contenedor del modal
      cartItemsContainer.innerHTML = '';

      for (const name in cart) {
        const item = cart[name];
        totalItems += item.quantity;
        subtotal += item.price * item.quantity;
        
        // Añadir item al modal (visualización) con botón eliminar
        const itemHtml = `
          <div class="flex items-center gap-4">
            <div class="flex items-center justify-center size-10 bg-card-dark rounded-lg border border-white/10 text-text-secondary-dark">
              ${item.quantity}x
            </div>
            <div class="flex-1">
              <p class="text-white font-bold">${name}</p>
              <p class="text-text-secondary-dark text-sm">S/ ${item.price.toFixed(2)}</p>
            </div>
            <p class="text-white font-bold">S/ ${(item.price * item.quantity).toFixed(2)}</p>
            <button class="remove-item-btn ml-3 p-2 rounded-full text-text-secondary-dark hover:text-white" data-name="${name}" aria-label="Quitar item">
              <span class="material-symbols-outlined">delete</span>
            </button>
          </div>
        `;
        cartItemsContainer.innerHTML += itemHtml;
      }
      
      if (totalItems === 0) {
        cartItemsContainer.innerHTML = `
          <div class="text-center text-text-secondary-dark pt-10">
            <span class="material-symbols-outlined text-4xl">shopping_cart</span>
            <p>Tu carrito está vacío.</p>
            <p class="text-sm">¡Añade platos del menú!</p>
          </div>
        `;
      }

      const service = subtotal * 0.10;
      const totalFinal = subtotal + service;

      // Actualizar barra flotante
      cartCountIcon.textContent = totalItems;
      cartTotalAmount.textContent = `S/ ${totalFinal.toFixed(2)}`;
      
      // Actualizar totales en el modal
      cartSubtotalEl.textContent = `S/ ${subtotal.toFixed(2)}`;
      cartServiceEl.textContent = `S/ ${service.toFixed(2)}`;
      cartTotalFinalEl.textContent = `S/ ${totalFinal.toFixed(2)}`;
    }
    
    // --- EVENT DELEGATION: quitar item del carrito ---
    cartItemsContainer.addEventListener('click', (e) => {
      const btn = e.target.closest('.remove-item-btn');
      if (!btn) return;
      const name = btn.dataset.name;
      if (name && cart[name]) {
        delete cart[name];
        updateCart();
      }
    });

    // --- LÓGICA DEL MODAL DEL CARRITO ---
    const cartSummaryBar = document.getElementById('cart-summary-bar');
    const cartModal = document.getElementById('cart-modal');
    const closeModalBtn = document.getElementById('close-modal-btn');
    
    cartSummaryBar.addEventListener('click', () => {
      cartModal.classList.remove('hidden');
    });
    
    closeModalBtn.addEventListener('click', () => {
      cartModal.classList.add('hidden');
    });
    
  });
</script>

</body>
</html>